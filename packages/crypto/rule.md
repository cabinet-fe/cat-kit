# 编码要求

## 依赖

依赖 `@cat-kit/core` 包。

## 全局要求

**下面的要求必须全部满足!!!**

- 同时支持浏览器(现代浏览器)端和 nodejs(版本大于 22)端。
- 代码要足够模块化，以便于构建工具可以进行 tree-shaking 优化。
- 代码要足够简单，不要引入额外的依赖。
- 代码要最大限度地进行性能优化
- 代码要足够可读，不要存在可读性问题。
- 加密和摘要算法要能够计算超大文件，不能出现 OOM 问题。

## 同构

crypto 要求在浏览器和 Node 环境中同时能够使用。

现代浏览器已经实现了相当多的加密算法，不过需要在 HTTPS 环境下才能使用。因此浏览器端加密算法需要考虑三种情况：

1. 浏览器环境，HTTPS 协议。此时直接封装浏览器原生 API 使用。
2. 浏览器环境，HTTP 环境。此时不能使用浏览器的加密算法，必须从头实现算法。
3. Node 环境。此时可以使用 Node 的加密算法。

## 代码复用

对于 `crypto` 库，如果可以复用的代码，请抽离出来供其他模块使用。

### 代码结构

- src/base。基础模块, 包含可复用的代码。
- src/key-gen。 key 生成模块
- src/symmetric。 对称加密模块
- src/digest。 摘要模块
